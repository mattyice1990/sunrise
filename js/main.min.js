document.addEventListener('DOMContentLoaded',function(){const observerOptions={threshold:0.2,rootMargin:'0px 0px -50px 0px'};const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('reveal');observer.unobserve(entry.target);}});},observerOptions);const timelineSteps=document.querySelectorAll('.timeline-step');timelineSteps.forEach((step,index)=>{step.style.transitionDelay=`${index * 0.15}s`;observer.observe(step);});});document.addEventListener('DOMContentLoaded',function(){const dropdowns=document.querySelectorAll('.dropdown');let closeTimeout;dropdowns.forEach(dropdown=>{const toggle=dropdown.querySelector('.dropdown-toggle');const header=dropdown.querySelector('.dropdown-header');const link=dropdown.querySelector('.dropdown-link');dropdown.addEventListener('mouseenter',function(){clearTimeout(closeTimeout);if(window.innerWidth>768){dropdowns.forEach(other=>{if(other!==dropdown){other.classList.remove('active');}});dropdown.classList.add('active');}});dropdown.addEventListener('mouseleave',function(){if(window.innerWidth>768){closeTimeout=setTimeout(()=>{dropdown.classList.remove('active');},200);}});if(header){header.addEventListener('click',function(e){if(link&&(e.target===link||link.contains(e.target))){return;}e.preventDefault();e.stopPropagation();dropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}if(toggle){toggle.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();dropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}});document.addEventListener('click',function(e){if(!e.target.closest('.dropdown')){dropdowns.forEach(dropdown=>{dropdown.classList.remove('active');});}});const mobileToggle=document.querySelector('.mobile-menu-toggle');const navLinks=document.querySelector('.nav-links');if(mobileToggle){mobileToggle.addEventListener('click',function(){navLinks.classList.toggle('active');this.classList.toggle('active');});}const navLinksAll=document.querySelectorAll('.nav-links a:not(.dropdown-toggle)');navLinksAll.forEach(link=>{link.addEventListener('click',function(){navLinks.classList.remove('active');if(mobileToggle){mobileToggle.classList.remove('active');}});});const footerDropdowns=document.querySelectorAll('.footer-dropdown');footerDropdowns.forEach(dropdown=>{const toggle=dropdown.querySelector('.footer-dropdown-toggle');const header=dropdown.querySelector('.footer-dropdown-header');const link=dropdown.querySelector('.footer-dropdown-link');if(header){header.addEventListener('click',function(e){if(link&&(e.target===link||link.contains(e.target))){return;}e.preventDefault();e.stopPropagation();footerDropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}if(toggle){toggle.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();footerDropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}});document.addEventListener('click',function(e){if(!e.target.closest('.footer-dropdown')){footerDropdowns.forEach(dropdown=>{dropdown.classList.remove('active');});}});});let currentSlide=0;const slides=document.querySelectorAll('.carousel-slide');const dots=document.querySelectorAll('.carousel-dot');const totalSlides=slides.length;function showSlide(index){slides.forEach(slide=>{slide.classList.remove('active','prev');});dots.forEach(dot=>{dot.classList.remove('active');});slides[index].classList.add('active');dots[index].classList.add('active');}function moveCarousel(direction){currentSlide=(currentSlide + direction + totalSlides)% totalSlides;showSlide(currentSlide);}function goToSlide(index){currentSlide=index;showSlide(currentSlide);}setInterval(()=>{moveCarousel(1);},5000);let currentGallerySlide=0;const galleryCards=document.querySelectorAll('.gallery-card');const galleryDots=document.querySelectorAll('.gallery-dot');const totalGallerySlides=galleryCards.length;function showGallerySlide(index){galleryCards.forEach(card=>{card.classList.remove('active');});galleryDots.forEach(dot=>{dot.classList.remove('active');});galleryCards[index].classList.add('active');galleryDots[index].classList.add('active');}function moveGallery(direction){currentGallerySlide=(currentGallerySlide + direction + totalGallerySlides)% totalGallerySlides;showGallerySlide(currentGallerySlide);}function goToGallerySlide(index){currentGallerySlide=index;showGallerySlide(currentGallerySlide);}setInterval(()=>{moveGallery(1);},5000);const lightboxModal=document.createElement('div');lightboxModal.className='lightbox-modal';lightboxModal.innerHTML=`<div class="lightbox-content"><button class="lightbox-close" aria-label="Close">&times;</button><img src="" alt=""><div class="lightbox-info"><h3></h3><p></p></div></div>`;document.body.appendChild(lightboxModal);const lightboxImg=lightboxModal.querySelector('img');const lightboxTitle=lightboxModal.querySelector('h3');const lightboxDesc=lightboxModal.querySelector('p');const lightboxClose=lightboxModal.querySelector('.lightbox-close');galleryCards.forEach(card=>{card.addEventListener('click',function(){if(!this.classList.contains('active'))return;window.location.href='gallery.html';});});lightboxClose.addEventListener('click',function(){lightboxModal.classList.remove('active');document.body.style.overflow='';});lightboxModal.addEventListener('click',function(e){if(e.target===lightboxModal){lightboxModal.classList.remove('active');document.body.style.overflow='';}});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&lightboxModal.classList.contains('active')){lightboxModal.classList.remove('active');document.body.style.overflow='';}});function animateCounter(element,target,duration=2000,callback){const start=0;const increment=target /(duration / 16);let current=0;const timer=setInterval(()=>{current +=increment;if(current>=target){element.textContent=Math.ceil(target);clearInterval(timer);if(callback)callback();}else{element.textContent=Math.ceil(current);}},16);}const statsObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const mileCounter=document.getElementById('mile-radius-counter');const mileTarget=parseInt(mileCounter.getAttribute('data-target'));animateCounter(mileCounter,mileTarget,2000);const citiesCounter=document.getElementById('cities-counter');const citiesPlus=document.getElementById('cities-plus');const citiesTarget=parseInt(citiesCounter.getAttribute('data-target'));animateCounter(citiesCounter,citiesTarget,2000,()=>{if(citiesPlus){citiesPlus.style.opacity='1';}});statsObserver.unobserve(entry.target);}});},{threshold:0.5});const statsSection=document.getElementById('service-stats');if(statsSection){statsObserver.observe(statsSection);}let serviceAreaMap;const SERVICE_RADIUS_MILES=40;const MILES_TO_METERS=1609.34;const businessLocation={title:"Sunrise Roofers LLC",address1:"7320 N La Cholla Blvd Ste 154-276",address2:"Tucson,AZ 85741,USA",coords:{lat:32.3399923325422,lng:-111.0119592071643}};const bensonLocation={title:"Benson Service Area",address:"Benson,AZ 85602",coords:{lat:31.9678809,lng:-110.2945396}};async function initServiceAreaMap(){const{Map}=await google.maps.importLibrary("maps");const{AdvancedMarkerElement,PinElement}=await google.maps.importLibrary("marker");serviceAreaMap=new Map(document.getElementById("service-area-map"),{center:businessLocation.coords,mapTypeControl:true,fullscreenControl:true,streetViewControl:false,zoomControl:true,mapId:"SUNRISE_ROOFERS_MAP",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});const serviceArea=new google.maps.Circle({strokeColor:"#F5A623",strokeOpacity:0.8,strokeWeight:2,fillColor:"#F5A623",fillOpacity:0.15,map:serviceAreaMap,center:businessLocation.coords,radius:SERVICE_RADIUS_MILES * MILES_TO_METERS});const bounds=serviceArea.getBounds();serviceAreaMap.fitBounds(bounds);setTimeout(()=>{const currentZoom=serviceAreaMap.getZoom();serviceAreaMap.setZoom(currentZoom - 0.2);},100);const pinElement=new PinElement({background:"#F5A623",borderColor:"#FFFFFF",glyphColor:"#FFFFFF",scale:1.3});const marker=new AdvancedMarkerElement({position:businessLocation.coords,map:serviceAreaMap,title:businessLocation.title,content:pinElement.element});const infoWindow=new google.maps.InfoWindow({content:`<div style="font-family:Arial,sans-serif;padding:12px;max-width:300px;"><h3 style="margin:0 0 10px 0;color:#F5A623;font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:1px;">${businessLocation.title}</h3><p style="margin:4px 0;font-size:14px;color:#666;line-height:1.5;">${businessLocation.address1}</p><p style="margin:4px 0;font-size:14px;color:#666;line-height:1.5;">${businessLocation.address2}</p><p style="margin:10px 0 12px 0;color:#1A1A1A;font-weight:600;font-size:13px;"><i class="fas fa-circle" style="color:#F5A623;font-size:8px;"></i>Service Area:${SERVICE_RADIUS_MILES}mile radius</p><div style="border-top:1px solid #E0E0E0;padding-top:12px;margin-top:12px;"><a href="https:target="_blank"rel="noopener noreferrer"style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#4285F4;color:white;text-decoration:none;border-radius:6px;font-size:14px;font-weight:600;transition:all 0.3s ease;box-shadow:0 2px 6px rgba(66,133,244,0.3);"onmouseover="this.style.background='#357ae8';this.style.boxShadow='0 4px 12px rgba(66,133,244,0.5)';"onmouseout="this.style.background='#4285F4';this.style.boxShadow='0 2px 6px rgba(66,133,244,0.3)';"><i class="fab fa-google" style="font-size:16px;"></i><span>View on Google Maps</span></a></div></div>`});marker.addListener("click",()=>{infoWindow.open(serviceAreaMap,marker);});setTimeout(()=>{infoWindow.open(serviceAreaMap,marker);},500);const bensonPinElement=new PinElement({background:"#E89510",borderColor:"#FFFFFF",glyphColor:"#FFFFFF",scale:1.1});const bensonMarker=new AdvancedMarkerElement({position:bensonLocation.coords,map:serviceAreaMap,title:bensonLocation.title,content:bensonPinElement.element});const bensonInfoWindow=new google.maps.InfoWindow({content:`<div style="font-family:Arial,sans-serif;padding:12px;max-width:280px;"><h3 style="margin:0 0 10px 0;color:#E89510;font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:1px;">${bensonLocation.title}</h3><p style="margin:4px 0;font-size:14px;color:#666;line-height:1.5;">${bensonLocation.address}</p><p style="margin:10px 0 0 0;color:#1A1A1A;font-weight:600;font-size:13px;"><i class="fas fa-check-circle" style="color:#E89510;font-size:12px;"></i>Full service coverage area</p></div>`});bensonMarker.addListener("click",()=>{bensonInfoWindow.open(serviceAreaMap,bensonMarker);});}window.initServiceAreaMap=initServiceAreaMap;