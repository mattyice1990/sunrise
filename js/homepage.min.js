document.addEventListener('DOMContentLoaded',function(){const dropdowns=document.querySelectorAll('.dropdown');let closeTimeout;dropdowns.forEach(dropdown=>{const toggle=dropdown.querySelector('.dropdown-toggle');const header=dropdown.querySelector('.dropdown-header');const link=dropdown.querySelector('.dropdown-link');dropdown.addEventListener('mouseenter',function(){clearTimeout(closeTimeout);if(window.innerWidth>768){dropdowns.forEach(other=>{if(other!==dropdown){other.classList.remove('active');}});dropdown.classList.add('active');}});dropdown.addEventListener('mouseleave',function(){if(window.innerWidth>768){closeTimeout=setTimeout(()=>{dropdown.classList.remove('active');},200);}});if(header){header.addEventListener('click',function(e){if(link&&(e.target===link||link.contains(e.target))){return;}e.preventDefault();e.stopPropagation();dropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}if(toggle){toggle.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();dropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}});document.addEventListener('click',function(e){if(!e.target.closest('.dropdown')){dropdowns.forEach(dropdown=>{dropdown.classList.remove('active');});}});});document.addEventListener('DOMContentLoaded',function(){const mobileToggle=document.querySelector('.mobile-menu-toggle');const navLinks=document.querySelector('.nav-links');if(mobileToggle&&navLinks){mobileToggle.addEventListener('click',function(){navLinks.classList.toggle('active');});const navLinksAll=document.querySelectorAll('.nav-links a:not(.dropdown-toggle)');navLinksAll.forEach(link=>{link.addEventListener('click',function(){navLinks.classList.remove('active');});});}});document.addEventListener('DOMContentLoaded',function(){const footerDropdowns=document.querySelectorAll('.footer-dropdown');footerDropdowns.forEach(dropdown=>{const toggle=dropdown.querySelector('.footer-dropdown-toggle');if(toggle){toggle.addEventListener('click',function(e){e.preventDefault();footerDropdowns.forEach(other=>{if(other!==dropdown)other.classList.remove('active');});dropdown.classList.toggle('active');});}});});let currentSlide=0;const slides=document.querySelectorAll('.carousel-slide');const dots=document.querySelectorAll('.carousel-dot');const totalSlides=slides.length;function showSlide(index){slides.forEach(slide=>{slide.classList.remove('active','prev');});dots.forEach(dot=>{dot.classList.remove('active');});slides[index].classList.add('active');dots[index].classList.add('active');}function moveCarousel(direction){currentSlide=(currentSlide+direction+totalSlides)% totalSlides;showSlide(currentSlide);}function goToSlide(index){currentSlide=index;showSlide(currentSlide);}if(totalSlides>0){setInterval(()=>{moveCarousel(1);},5000);}function animateCounter(element,target,duration=2000,callback){const start=0;const increment=target/(duration/16);let current=0;const timer=setInterval(()=>{current+=increment;if(current>=target){element.textContent=Math.ceil(target);clearInterval(timer);if(callback)callback();}else{element.textContent=Math.ceil(current);}},16);}const statsObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const mileCounter=document.getElementById('mile-radius-counter');if(mileCounter&&!mileCounter.dataset.animated){mileCounter.dataset.animated='true';animateCounter(mileCounter,40);}statsObserver.unobserve(entry.target);}});},{threshold:0.5});const statsSection=document.querySelector('#mile-radius-counter');if(statsSection){statsObserver.observe(statsSection.closest('section')||statsSection);}function toggleServices(){const servicesGrid=document.getElementById('servicesGrid');const toggleBtn=document.getElementById('toggleServicesBtn');if(servicesGrid&&toggleBtn){servicesGrid.classList.toggle('expanded');const isExpanded=servicesGrid.classList.contains('expanded');toggleBtn.setAttribute('aria-expanded',isExpanded);toggleBtn.innerHTML=isExpanded?'Show Less<span style="display:inline-block;transition:transform 0.3s;transform:rotate(180deg);">▼</span>':'View All Services<span style="display:inline-block;transition:transform 0.3s;">▼</span>';}}